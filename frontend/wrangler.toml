name = "krawangan-frontend"
compatibility_date = "2024-01-01"
pages_build_output_dir = "out"

[build]
command = "npm run build"
cwd = "."

[build.environment_variables]
NODE_VERSION = "18"

[[pages_build_config]]
# Build command
build_command = "npm run build"
# Build output directory
destination_dir = "out"
# Root directory
root_dir = "."

# Environment variables for production
[vars]
NODE_ENV = "production"

# Custom domains (uncomment and replace with your domain)
# [[custom_domains]]
# domain = "yourdomain.com"

# Security headers
[[headers]]
source = "/(.*)"
headers = [
  { key = "X-Frame-Options", value = "DENY" },
  { key = "X-Content-Type-Options", value = "nosniff" },
  { key = "Referrer-Policy", value = "strict-origin-when-cross-origin" },
  { key = "Permissions-Policy", value = "camera=(), microphone=(), geolocation=()" }
]

# Cache static assets
[[headers]]
source = "/_next/static/(.*)"
headers = [
  { key = "Cache-Control", value = "public, max-age=31536000, immutable" }
]

# API routes (if you have any)
[[headers]]
source = "/api/(.*)"
headers = [
  { key = "Cache-Control", value = "no-cache, no-store, must-revalidate" },
  { key = "Access-Control-Allow-Origin", value = "*" },
  { key = "Access-Control-Allow-Methods", value = "GET, POST, PUT, DELETE, OPTIONS" },
  { key = "Access-Control-Allow-Headers", value = "Content-Type, Authorization" }
]
